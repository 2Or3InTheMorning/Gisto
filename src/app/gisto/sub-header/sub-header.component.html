<sub-controlls *ngIf="uiStore.sideBar">
  <search>
      <div><i class="fa fa-search" aria-hidden="true"></i></div>
      <input type="search"
             placeholder="{{ uiStore.loading ? 'Loading...' : 'search ' + size(gistStore.gists) + ' gists' }}"
             #searchBox (keyup)="updateFilter(searchBox.value)" />
      <i class="fa fa-angle-down" aria-hidden="true"></i>
  </search>
  <button><i class="fa fa-plus" aria-hidden="true"></i> New gist</button>
</sub-controlls>

<gist-title title="{{ gistStore.current.description }} {{ gistStore.current.tags && gistStore.current.tags.join(', ') }}">

  <div *ngIf="uiStore.editMode; then editDescription else showDescription"></div>
  <ng-template #editDescription>
    <strong *ngIf="uiStore.editMode">Edit: </strong> <input #description (keyup)="changeLocalDescription(description.value)" placeholder="untitled" [value]="gistStore.current.description" />
  </ng-template>
  <ng-template #showDescription>
    {{ gistStore.current.description | cleanTags }} <title-tag *ngFor="let tag of gistStore.current.tags"> {{ tag }}</title-tag>
  </ng-template>

</gist-title>

<gist-utils *ngIf="uiStore.isEdit" icon="fa-save" (click)="save(gistStore.current.id)" cssClass="color-success"></gist-utils>

<gist-utils
  icon="{{ uiStore.isEdit ? 'fa-ban' : 'fa-pencil' }}"
  (click)="toggleEditOrSaveMode()"
  cssClass="{{ uiStore.isEdit ? 'color-danger' : 'color-success'}}"></gist-utils>

<gist-utils icon="{{ gistStore.current.public ? 'fa-unlock' : 'fa-lock'}}"></gist-utils>

<gist-utils (click)="deleteGist(gistStore.current.id)" icon="fa-trash-o" cssClass="color-danger"></gist-utils>

<gist-utils>
  <i class="fa fa-comment-o"></i> {{ gistStore.current.comments || 0 }}
</gist-utils>

<gist-utils icon="{{ gistStore.current.star ? 'fa-star' : 'fa-star-o'}}"
  (click)="gistStore.current.star ? unStar(gistStore.current.id) : star(gistStore.current.id)">
</gist-utils>

<gist-utils (click)="toggleMenu()" cssClass="fa-ellipsis-v">
  <ul *ngIf="showMenu">
    <li (click)="toggleEditOrSaveMode()">{{ uiStore.isEdit ? 'Cancel Edit' : 'Edit' }}</li>
    <li><a target="_new" href="https://gist.github.com/{{ gistStore.currentGist.owner.login }}/{{ gistStore.currentGist.id }}">Open on web</a></li>
    <li>Download</li>
    <li>Copy to clipboard</li>
    <li class="color-danger">Delete</li>
  </ul>
</gist-utils>
